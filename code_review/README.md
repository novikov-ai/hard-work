# Правильный code review

## 1. Обозревайте не более 200-400 строк кода за раз.

На код-ревью фокусируюсь на одном файле, при этом иду от тех файлов, которые затронуты в меньшей степени, к тем, которые были сильно изменены. 

Стараюсь ограничивать рассматриваемый скоуп несколькими функциями, как правило, теми, которые вызывают друг друга каскадом. 

Рассматриваемое окно: 50-200 строк кода.

## 2. Придерживайтесь темпа не более 300-500 строк кода/час.

За час успеваю внимательно просмотреть не более 300 строк. При этом считаю, что много измененных строк кода - плохая практика, так как большой пул-реквест сложнее воспринимать и дольше ревьюить.

## 3. Отведите достаточно времени для вдумчивого и неспешгого просмотра, однако не более 60-90 минут.

Стараюсь уделять не более 30-45 минут на ревью, так как иначе устаю и теряю эффективность. Также заметил, что количество найденных ошибок не пропорционально потраченному времени на ревью.

## 4. Авторов кода следует принуждать к комментированию/документированию кода до начала code review.

Всегда даю исчерпывающее описание на Пул-реквесте в формате: "Что было сделано и зачем". Также даю пояснения по ходу, если они требуются. 

У коллег явно запрашиваю комментарии, если без них понимание затруднено.

## 5. Устанавливайте количественно измеряемые цели в обзорах кода и фиксируйте метрики, чтобы улучшать этот процесс.

Явных метрик при обзоре кода нет, так как цель - сделать код лучше, а не рисовать дашборды по качеству или производительности. Несмотря на это с уверенностью могу сказать, что команда улучшает процесс ревью с опытом, обращая внимание на действительно важные детали, а не придирки.

## 6. Чек-листы существенно улучшают результаты как для программистов, так и для инспекторов.

При создании пул-реквестов мы настроили создание базовых чек-листы, чтобы программисты, например, не забывали обновлять ченджлог или прогонять линтер, но чек-листов для детального ревью - нет.

## 7. Убедитесь, что баги действительно исправлены!

На каждый найденный баг заводится юнит-тест на соответствующую логику.

## 8. Формированию правильной культуры обзоров кода, когда поиск дефектов методами пристального взгляда воспринимается положительно всеми сторонами, должны способствовать прежде всего менеджеры проектов

Менеджеры проекты участвуют в процессе в меньшей степени. У нас довольно зрелая команда, где каждый из инженеров ответственно относится к код-ревью и понимает его ценность.

## 9.  Остерегайтесь эффекта "Большого брата".

Так как на ревью не собираем метрики, то эффект исключен.

## 10. Эффект эго: сделайте хотя бы небольшой обзор кода, даже если у вас нет времени просмотреть весь код.

Эффект эго работает. Зная, что мой код будет смотреть коллега - я всегда лишний раз постараюсь сделать его более качественным.

## 11. Облегчённые обзоры кода всё равно остаются эффективны, практичны и полезны при поиске ошибок.

Лучше сделать быстрый 30 минутный обзор кода и вернуться потом еще раз, чем прокрастинировать перед долгим обзором. Так мы помогаем и автору кода быстрее начать исправлять ошибки, если они есть в явном виде.

